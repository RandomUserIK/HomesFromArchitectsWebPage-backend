os: linux
dist: bionic
sudo: required
language: java

addons:
  apt:
    packages:
      - maven

services:
  - mysql

before_install:
  - mysql -e "CREATE DATABASE IF NOT EXISTS sparta_dev;"
  - mysql -e "CREATE USER 'spartauser'@'localhost' IDENTIFIED BY 'password';"
  - mysql -e "GRANT ALL PRIVILEGES ON sparta_dev. * TO 'spartauser'@'localhost';"

script:
  ./build.sh

branches:
  only:
    - main
    - dev
    - /^Sparta-.*$/
    - /^refactor/*$/
    - /^fix/*$/

notifications:
  email: false